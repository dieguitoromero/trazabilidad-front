:host {
    .tracking-back-row {
        display: flex;
        margin-top: 16px;
        margin-bottom: 24px;
        margin-left: 24px;
    }
    .back-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: transparent;
        color: #333;
        border: none;
        border-radius: 0;
        padding: 0;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: color .15s ease;
    }
    .back-badge:hover { color: #0a3a6b; }
    .back-badge .arrow {
        font-size: 20px;
        line-height: 1;
        font-weight: 600;
    }
    .back-badge .text { line-height: 1; }
    .doc-header {
        padding: 16px 0 8px;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }
    .doc-title {
        font-weight: 700;
        font-size: 22px;
        color: #0a3a6b;
    }
    .doc-subtitle {
        margin-top: 4px;
        color: #9e9e9e;
        font-weight: 600;
    }
    .doc-location-row {
        margin-top: 12px;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    .doc-location-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #e8f0fe;
        display: flex;
        align-items: center;
        justify-content: center;
        img { width: 22px; height: 22px; }
    }
    .doc-location-text {
        font-size: 22px;
        color: #111;
        .doc-location-title { font-weight: 600; }
        .doc-location-desc { font-weight: 500; }
    }
    .search-wrapper {
        margin-bottom: 8px;
    }
    .box-container {
        width: 100%;
        margin: 24px 0 0 0;
        box-shadow: 1px 3px 11px #CCC;
        padding: 0 24px;
        margin-bottom: 8px;

        &.no-padding {
            padding: 0;
        }
    }

    .box-container:first-of-type {
        margin-top: 32px;
    }

    .estado-movil {
        display: none;
        align-items: center;
        gap: 8px;
        color: #344054;
        margin: 4px 0 20px;
    }
    .estado-movil .estado-icon { width: 24px; height: 24px; display: block; margin: 0 -2px 0 0; }
    .estado-movil .estado-icon img { width: 24px; height: 24px; display: block; }
    .estado-movil .estado-text { font-size: 14px; }

    @media (max-width: 768px) {
        .hide-on-mobile { display: none !important; }
        .show-on-mobile { display: flex !important; }
        .doc-location-icon { width: 28px; height: 28px; display: block; margin: 0 0 18px 8px; background: transparent; border-radius: 0; }
        .doc-location-icon img { width: 28px; height: 28px; display: block; }
        .doc-location-text { font-size: 14px; margin: 0 0 14px 8px; }
        .doc-title { font-size: 18px; font-weight: 700; color: #0a3a6b; }
    }
}

.stepper-progress {
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 8px;
    color: #2b3e63;
}

// Inline stepper styles (ported from the original tracking-stepper-view)
:host {
    .stepper-view-container {
        margin-top: -20px;
        position: relative;
        margin-bottom: 20px;
        padding: 15px 0;
        display: flex;
        flex-direction: column;

        .step-container {
            text-align: center;
            flex: 1 1 0;
            display: flex;
            flex-direction: column;
            align-items: stretch;

            .icon-wrapper {
                position: relative;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }

            .product-count-badge {
                position: absolute;
                top: -6px;
                right: -6px;
                background: #d32f2f;
                color: #fff;
                font-size: 11px;
                line-height: 16px;
                width: 16px;
                height: 16px;
                border-radius: 8px;
                text-align: center;
                font-weight: 600;
                box-shadow: 0 0 0 2px #fff;
            }

            .alcanzado-text {
                margin-top: 4px;
                font-size: 11px;
                font-weight: 600;
                color: #003c69;
                text-align: center;
                line-height: 1.2;
            }

            .step-title {
                margin: 16px 0;
                color: #4d4f57;
                font-weight: bold;

                p {
                    white-space: nowrap;
                    text-overflow: ellipsis;
                    display: inline-block;
                }
            }

            .step-details {
                padding: 10px 20px;

                p {
                    padding: 0 20px;
                    font-size: 12px;
                    color: #606060;
                }

                span, .date-observacion {
                    font-weight: normal;
                    font-size: 12px;
                    color: #959494;
                }
            }

            .step {
                .icon {
                    width: 36px;
                    height: 36px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .step-separator {
                    height: 2px;
                    background-color: #c5ced8;

                    &.beginning {
                        border-radius: 5px 0 0 5px;
                        background: linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 1) 44%, rgba(197, 206, 216, 1) 82%);
                    }

                    &.end {
                        border-radius: 0 5px 5px 0;
                        background: linear-gradient(90deg, rgba(197, 206, 216, 1) 0%, rgba(255, 255, 255, 1) 44%, rgba(255, 255, 255, 1) 82%);
                    }
                }

                &.in-progress {
                    .step-separator {
                        &.to:not(.end), &.from {
                            border-top: 4px dotted #00aa00;
                            background-color: transparent !important;
                            border-radius: 0;
                            margin: 0 2px;
                        }
                    }

                    &.last:not(.completed) {
                        .step-separator {
                            &.to {
                                background-color: transparent;
                                border: 0;
                                margin: 0;
                            }
                        }
                    }

                    &:not(.vertical) {
                        .step-container {
                            .step {
                                padding: 0 28px;
                            }
                        }
                    }
                }

                &.completed {
                    .step-separator {
                        background-color: #003c69;

                        &.beginning {
                            border-radius: 5px 0 0 5px;
                            background: linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 1) 44%, #003c69 82%);
                        }

                        &.end {
                            border-radius: 0 5px 5px 0;
                            background: linear-gradient(90deg, #003c69 0%, rgba(255, 255, 255, 1) 44%, rgba(255, 255, 255, 1) 82%);
                        }
                    }

                    &.in-progress {
                        .step-separator {
                            &.from {
                                background-color: #003c69 !important;
                                border: 0;
                                margin: 0 auto;
                            }
                        }

                        &.last {
                            .step-separator {
                                &.to:not(.end) {
                                    border-top: 4px dotted #00aa00;
                                    background-color: transparent !important;
                                    border-radius: 0;
                                    margin: 0 2px;
                                }
                            }
                        }
                    }
                }

                &.last {
                    .step-separator {
                        &.to {
                            background-color: #c5ced8;
                        }
                    }
                }
            }
        }

        &.vertical {
            box-shadow: none;
            margin-top: 0px;

            .step-container {
                .step-title {
                    text-align: left;
                    margin: 31px 0 0 15px;

                    &.beginning {
                        margin-top: 0;
                    }

                    .title {
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        color: #4d4f57;
                        font-weight: bold;
                        margin-bottom: 2px;
                        display: block;
                    }

                    .sub-title {
                        font-size: 12px;
                        color: #606060;
                        margin-bottom: 2px;
                    }

                    .date {
                        font-size: 12px;
                        font-weight: normal;
                        color: #959494;
                    }
                }

                .step {
                    .step-separator {
                        width: 2px;
                        min-height: 45px;
                        margin: -5px auto 0;
                        height: auto;

                        &.beginning {
                            border-radius: 5px 5px 0 0;
                        }

                        &.end {
                            border-radius: 0 0 5px 5px;
                        }
                    }

                    &.beginning {
                        margin-top: 10px;
                    }
                }
            }
        }
    }

    .fadingEffect {
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        width: 0%;
        background: white;
        animation: showHide 1s ease-in alternate infinite;
        animation-iteration-count: 1;
        background: linear-gradient(to right, transparent 0%, white 10%)
    }
}

@keyframes showHide {
    0% { width: 100% }
    100% { width: 0% }
}

:host {
    .step .icon.pending {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: #d9dee6;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: #6b7685;
    }
}

// Mobile vertical alignment and continuous line
@media (max-width: 768px) {
    :host {
        .stepper-view-container.mobile-vertical {
            box-shadow: none;
            padding: 4px 0 12px 0;
            position: relative;

            &:before {
                content: '';
                position: absolute;
                top: 12px;
                bottom: 12px;
                left: 42px;
                width: 2px;
                background: #003c69;
            }

            .step-container {
                .step-title {
                    text-align: left;
                    margin: 0;
                    padding: 0;
                    overflow-x: hidden;
                    min-width: 160px;

                    .title { color: #4d4f57; font-weight: bold; margin-bottom: 2px; }
                    .sub-title { font-size: 12px; color: #606060; margin-bottom: 2px; }
                    .date { font-size: 12px; font-weight: normal; color: #959494; }
                }

                .step {
                    position: relative;
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    padding: 12px 0;

                    .icon { margin-left: 24px; position: relative; z-index: 2; }

                    &.in-progress {
                        .step-separator { min-height: 45px; }
                        .step-separator.to:not(.end), .step-separator.from {
                            border-left: 4px dotted #00aa00;
                            border-top: 0;
                            margin: 2px auto;
                        }
                    }

                    &.completed.in-progress {
                        .step-separator.from { background-color: #003c69 !important; border: 0; margin: 0 auto; }
                        &.last .step-separator.to:not(.end) { border-left: 4px dotted #00aa00; border-top: 0; margin:2px auto; }
                    }
                }
            }

            .step-separator { width: 2px; min-height: 45px; margin: -5px auto 0; height: auto; }
            .step-container .step.beginning .step-separator.from { margin-top: 0; }
            .step-container .step .step-separator { display: none; }
            .step-container { display: flex; flex-direction: row; align-items: stretch; }
            .step-container .step-title { margin-left: 8px; display: flex; flex-direction: column; justify-content: center; }
            .step-container .step .icon { margin-left: 24px; }
            .step-container .step-title .sub-title { line-height: 1.25; }

            .product-count-badge {
                position: absolute;
                top: -6px;
                right: -6px;
                background: #d32f2f;
                color: #fff;
                font-size: 11px;
                line-height: 16px;
                width: 16px;
                height: 16px;
                border-radius: 8px;
                text-align: center;
                font-weight: 600;
                box-shadow: 0 0 0 2px #fff;
            }
        }
    }
}

// Estilos Resumen de tu compra
.purchase-summary-card {
    padding: 20px 0 24px;
    h3 { font-size: 16px; font-weight: 600; margin: 0 0 16px; }
    .tipo-entrega-row { display: flex; align-items: flex-start; gap: 16px; }
    .icon-col { width: 48px; height: 48px; border-radius: 50%; background: #e8f0fe; flex-shrink: 0; position: relative; }
    .icon-col.tienda { background: #e8f0fe url('/assets/tienda-icon.svg') center/26px 26px no-repeat; }
    .icon-col.domicilio { background: #e8f0fe url('/assets/domicilio-icon.svg') center/26px 26px no-repeat; }
    .data-col { flex: 1; }
    .data-col .tipo { font-weight: 600; font-size: 14px; margin: 0 0 4px; }
    .data-col .direccion { font-size: 13px; margin: 0 0 6px; font-weight: 600; color: #2b2b2b; }
    .data-col .fecha-compra { font-size: 12px; margin: 4px 0 0; color: #555; }
}

@media (max-width: 768px) {
    .purchase-summary-card { padding: 16px 0 20px; }
    .purchase-summary-card h3 { margin-bottom: 12px; }
    .purchase-summary-card .icon-col { width:40px; height:40px; background-size:22px 22px; }
    .purchase-summary-card .data-col .tipo { font-size:13px; }
    .purchase-summary-card .data-col .direccion { font-size:12px; }
    .purchase-summary-card .data-col .fecha-compra { font-size:11px; }
}

// Estilos productos pedido
.pedido-summary-card {
    padding: 20px 0 24px;
    h3 { font-size:16px; font-weight:600; margin:0 0 12px; }
    .sub { font-size:14px; font-weight:600; margin:0 0 4px; }
    .sub-line { height:2px; background:#d21313; width:100%; margin:0 0 16px; }
    .productos-wrapper { margin-top: 4px; }
    .productos-list { display:flex; flex-direction:column; }
    .producto-item { display:flex; align-items:stretch; position:relative; padding:12px 0; }
    .producto-item:first-child { padding-top:0; }
    .left-block { display:flex; align-items:flex-start; gap:12px; flex:1; }
    .right-block { display:flex; align-items:flex-start; justify-content:flex-end; min-width:140px; }
    .producto-img { width:56px; height:56px; object-fit:cover; border:1px solid #e0e0e0; border-radius:4px; background:#fafafa; }
    .img-col { flex-shrink:0; }
    .info-col { flex:1; }
    .info-col .nombre { font-size:13px; font-weight:600; margin:0 0 6px; line-height:1.25; color:#2b2b2b; }
    .info-col .cantidad { font-size:12px; margin:0 0 4px; font-weight:600; color:#0a3a6b; }
    .sku-inline { font-size:12px; font-weight:600; color:#2b2b2b; padding-top:4px; }
    .row-separator { position:absolute; left:0; bottom:0; width:100%; height:1px; background:#e5e5e5; }
}

@media (max-width: 768px) {
    .pedido-summary-card { padding:16px 0 20px; }
    .pedido-summary-card .producto-img { width:48px; height:48px; }
    .pedido-summary-card .info-col .nombre { font-size:12px; }
    .pedido-summary-card .info-col .cantidad { font-size:11px; }
    .pedido-summary-card .sku-inline { font-size:11px; }
}
